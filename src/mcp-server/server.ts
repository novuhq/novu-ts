/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { NovuCore } from "../core.js";
import { SDKOptions } from "../lib/config.js";
import type { ConsoleLogger } from "./console-logger.js";
import { createRegisterPrompt } from "./prompts.js";
import {
  createRegisterResource,
  createRegisterResourceTemplate,
} from "./resources.js";
import { MCPScope } from "./scopes.js";
import { createRegisterTool } from "./tools.js";
import { tool$cancel } from "./tools/cancel.js";
import { tool$environmentsCreate } from "./tools/environmentsCreate.js";
import { tool$environmentsDelete } from "./tools/environmentsDelete.js";
import { tool$environmentsGetTags } from "./tools/environmentsGetTags.js";
import { tool$environmentsList } from "./tools/environmentsList.js";
import { tool$environmentsUpdate } from "./tools/environmentsUpdate.js";
import { tool$inboundWebhooksControllerHandleWebhook } from "./tools/inboundWebhooksControllerHandleWebhook.js";
import { tool$integrationsCreate } from "./tools/integrationsCreate.js";
import { tool$integrationsDelete } from "./tools/integrationsDelete.js";
import { tool$integrationsIntegrationsControllerAutoConfigureIntegration } from "./tools/integrationsIntegrationsControllerAutoConfigureIntegration.js";
import { tool$integrationsList } from "./tools/integrationsList.js";
import { tool$integrationsListActive } from "./tools/integrationsListActive.js";
import { tool$integrationsSetAsPrimary } from "./tools/integrationsSetAsPrimary.js";
import { tool$integrationsUpdate } from "./tools/integrationsUpdate.js";
import { tool$layoutsCreate } from "./tools/layoutsCreate.js";
import { tool$layoutsDelete } from "./tools/layoutsDelete.js";
import { tool$layoutsDuplicate } from "./tools/layoutsDuplicate.js";
import { tool$layoutsGeneratePreview } from "./tools/layoutsGeneratePreview.js";
import { tool$layoutsList } from "./tools/layoutsList.js";
import { tool$layoutsRetrieve } from "./tools/layoutsRetrieve.js";
import { tool$layoutsUpdate } from "./tools/layoutsUpdate.js";
import { tool$layoutsUsage } from "./tools/layoutsUsage.js";
import { tool$messagesDelete } from "./tools/messagesDelete.js";
import { tool$messagesDeleteByTransactionId } from "./tools/messagesDeleteByTransactionId.js";
import { tool$messagesRetrieve } from "./tools/messagesRetrieve.js";
import { tool$notificationsList } from "./tools/notificationsList.js";
import { tool$notificationsRetrieve } from "./tools/notificationsRetrieve.js";
import { tool$subscribersCreate } from "./tools/subscribersCreate.js";
import { tool$subscribersCreateBulk } from "./tools/subscribersCreateBulk.js";
import { tool$subscribersCredentialsAppend } from "./tools/subscribersCredentialsAppend.js";
import { tool$subscribersCredentialsDelete } from "./tools/subscribersCredentialsDelete.js";
import { tool$subscribersCredentialsUpdate } from "./tools/subscribersCredentialsUpdate.js";
import { tool$subscribersDelete } from "./tools/subscribersDelete.js";
import { tool$subscribersMessagesMarkAll } from "./tools/subscribersMessagesMarkAll.js";
import { tool$subscribersMessagesMarkAllAs } from "./tools/subscribersMessagesMarkAllAs.js";
import { tool$subscribersMessagesUpdateAsSeen } from "./tools/subscribersMessagesUpdateAsSeen.js";
import { tool$subscribersNotificationsFeed } from "./tools/subscribersNotificationsFeed.js";
import { tool$subscribersNotificationsUnseenCount } from "./tools/subscribersNotificationsUnseenCount.js";
import { tool$subscribersPatch } from "./tools/subscribersPatch.js";
import { tool$subscribersPreferencesBulkUpdate } from "./tools/subscribersPreferencesBulkUpdate.js";
import { tool$subscribersPreferencesList } from "./tools/subscribersPreferencesList.js";
import { tool$subscribersPreferencesUpdate } from "./tools/subscribersPreferencesUpdate.js";
import { tool$subscribersPropertiesUpdateOnlineFlag } from "./tools/subscribersPropertiesUpdateOnlineFlag.js";
import { tool$subscribersRetrieve } from "./tools/subscribersRetrieve.js";
import { tool$subscribersSearch } from "./tools/subscribersSearch.js";
import { tool$subscribersTopicsList } from "./tools/subscribersTopicsList.js";
import { tool$topicsCreate } from "./tools/topicsCreate.js";
import { tool$topicsDelete } from "./tools/topicsDelete.js";
import { tool$topicsGet } from "./tools/topicsGet.js";
import { tool$topicsList } from "./tools/topicsList.js";
import { tool$topicsSubscribersRetrieve } from "./tools/topicsSubscribersRetrieve.js";
import { tool$topicsSubscriptionsCreate } from "./tools/topicsSubscriptionsCreate.js";
import { tool$topicsSubscriptionsDelete } from "./tools/topicsSubscriptionsDelete.js";
import { tool$topicsSubscriptionsList } from "./tools/topicsSubscriptionsList.js";
import { tool$topicsUpdate } from "./tools/topicsUpdate.js";
import { tool$translationsCreate } from "./tools/translationsCreate.js";
import { tool$translationsDelete } from "./tools/translationsDelete.js";
import { tool$translationsGroupsDelete } from "./tools/translationsGroupsDelete.js";
import { tool$translationsGroupsRetrieve } from "./tools/translationsGroupsRetrieve.js";
import { tool$translationsMasterImport } from "./tools/translationsMasterImport.js";
import { tool$translationsMasterRetrieve } from "./tools/translationsMasterRetrieve.js";
import { tool$translationsMasterUpload } from "./tools/translationsMasterUpload.js";
import { tool$translationsRetrieve } from "./tools/translationsRetrieve.js";
import { tool$translationsUpload } from "./tools/translationsUpload.js";
import { tool$trigger } from "./tools/trigger.js";
import { tool$triggerBroadcast } from "./tools/triggerBroadcast.js";
import { tool$triggerBulk } from "./tools/triggerBulk.js";
import { tool$workflowsCreate } from "./tools/workflowsCreate.js";
import { tool$workflowsDelete } from "./tools/workflowsDelete.js";
import { tool$workflowsGet } from "./tools/workflowsGet.js";
import { tool$workflowsList } from "./tools/workflowsList.js";
import { tool$workflowsPatch } from "./tools/workflowsPatch.js";
import { tool$workflowsStepsRetrieve } from "./tools/workflowsStepsRetrieve.js";
import { tool$workflowsSync } from "./tools/workflowsSync.js";
import { tool$workflowsUpdate } from "./tools/workflowsUpdate.js";

export function createMCPServer(deps: {
  logger: ConsoleLogger;
  allowedTools?: string[] | undefined;
  scopes?: MCPScope[] | undefined;
  serverURL?: string | undefined;
  secretKey?: SDKOptions["secretKey"] | undefined;
  serverIdx?: SDKOptions["serverIdx"] | undefined;
}) {
  const server = new McpServer({
    name: "Novu",
    version: "1.7.1",
  });

  const client = new NovuCore({
    secretKey: deps.secretKey,
    serverURL: deps.serverURL,
    serverIdx: deps.serverIdx,
  });

  const scopes = new Set(deps.scopes);

  const allowedTools = deps.allowedTools && new Set(deps.allowedTools);
  const tool = createRegisterTool(
    deps.logger,
    server,
    client,
    scopes,
    allowedTools,
  );
  const resource = createRegisterResource(deps.logger, server, client, scopes);
  const resourceTemplate = createRegisterResourceTemplate(
    deps.logger,
    server,
    client,
    scopes,
  );
  const prompt = createRegisterPrompt(deps.logger, server, client, scopes);
  const register = { tool, resource, resourceTemplate, prompt };
  void register; // suppress unused warnings

  tool(tool$inboundWebhooksControllerHandleWebhook);
  tool(tool$trigger);
  tool(tool$cancel);
  tool(tool$triggerBroadcast);
  tool(tool$triggerBulk);
  tool(tool$environmentsGetTags);
  tool(tool$environmentsCreate);
  tool(tool$environmentsList);
  tool(tool$environmentsUpdate);
  tool(tool$environmentsDelete);
  tool(tool$layoutsCreate);
  tool(tool$layoutsList);
  tool(tool$layoutsUpdate);
  tool(tool$layoutsRetrieve);
  tool(tool$layoutsDelete);
  tool(tool$layoutsDuplicate);
  tool(tool$layoutsGeneratePreview);
  tool(tool$layoutsUsage);
  tool(tool$subscribersSearch);
  tool(tool$subscribersCreate);
  tool(tool$subscribersRetrieve);
  tool(tool$subscribersPatch);
  tool(tool$subscribersDelete);
  tool(tool$subscribersCreateBulk);
  tool(tool$topicsList);
  tool(tool$topicsCreate);
  tool(tool$topicsGet);
  tool(tool$topicsUpdate);
  tool(tool$topicsDelete);
  tool(tool$translationsCreate);
  tool(tool$translationsRetrieve);
  tool(tool$translationsDelete);
  tool(tool$translationsUpload);
  tool(tool$workflowsCreate);
  tool(tool$workflowsList);
  tool(tool$workflowsUpdate);
  tool(tool$workflowsGet);
  tool(tool$workflowsDelete);
  tool(tool$workflowsPatch);
  tool(tool$workflowsSync);
  tool(tool$integrationsList);
  tool(tool$integrationsCreate);
  tool(tool$integrationsUpdate);
  tool(tool$integrationsDelete);
  tool(tool$integrationsIntegrationsControllerAutoConfigureIntegration);
  tool(tool$integrationsSetAsPrimary);
  tool(tool$integrationsListActive);
  tool(tool$messagesRetrieve);
  tool(tool$messagesDelete);
  tool(tool$messagesDeleteByTransactionId);
  tool(tool$notificationsList);
  tool(tool$notificationsRetrieve);
  tool(tool$subscribersPreferencesList);
  tool(tool$subscribersPreferencesUpdate);
  tool(tool$subscribersPreferencesBulkUpdate);
  tool(tool$subscribersTopicsList);
  tool(tool$subscribersCredentialsUpdate);
  tool(tool$subscribersCredentialsAppend);
  tool(tool$subscribersCredentialsDelete);
  tool(tool$subscribersMessagesUpdateAsSeen);
  tool(tool$subscribersMessagesMarkAll);
  tool(tool$subscribersMessagesMarkAllAs);
  tool(tool$subscribersNotificationsFeed);
  tool(tool$subscribersNotificationsUnseenCount);
  tool(tool$subscribersPropertiesUpdateOnlineFlag);
  tool(tool$topicsSubscriptionsList);
  tool(tool$topicsSubscriptionsCreate);
  tool(tool$topicsSubscriptionsDelete);
  tool(tool$topicsSubscribersRetrieve);
  tool(tool$translationsGroupsDelete);
  tool(tool$translationsGroupsRetrieve);
  tool(tool$translationsMasterRetrieve);
  tool(tool$translationsMasterImport);
  tool(tool$translationsMasterUpload);
  tool(tool$workflowsStepsRetrieve);

  return server;
}
